{"ast":null,"code":"var _jsxFileName = \"/Users/alisakrylova/Intro/client/src/components/Profile.js\";\nimport React, { useCallback, useContext, useEffect, useState } from 'react';\nimport './Appearence/Profile.css';\nimport './Appearence/index.css';\nimport { AuthContext } from \"./Context/AuthContext\";\nimport { useHttp } from \"../Hooks/http.hook\";\nimport { NavLink } from \"react-router-dom\";\nexport const Profile = () => {\n  const {\n    loading,\n    request\n  } = useHttp();\n  const {\n    token,\n    userID,\n    name,\n    surname,\n    username,\n    userType\n  } = useContext(AuthContext);\n  const [results, setResults] = useState([]);\n  const [shown, setShown] = useState([0, 1]);\n  const [search, setSearch] = useState();\n  const rendering = results.map((result, index) => {\n    // console.log(\"INCLUDES: \", shown.includes(index))\n    if (shown.includes(index)) {\n      return /*#__PURE__*/React.createElement(NavLink, {\n        to: '/',\n        key: index,\n        className: \"resultItem soft_appearing\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 21,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"resultTestName\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 22,\n          columnNumber: 11\n        }\n      }, result.test), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"shortResult\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23,\n          columnNumber: 11\n        }\n      }, result.result.map((result, i) => {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          key: i,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 27,\n            columnNumber: 25\n          }\n        }, result.scaleResult);\n      })));\n    }\n  });\n  const fetchResults = useCallback(async () => {\n    try {\n      const fetched = await request(`/results/${username}`, 'GET', null, {\n        Authorization: `Bearer ${token}`\n      });\n      setResults(fetched);\n    } catch (e) {}\n  }, [token, userID]);\n\n  const doSearch = e => {\n    e.preventDefault();\n\n    if (search != '') {\n      let resultsArray = [];\n      results.map((result, i) => {\n        let test = result.test;\n        let res = '';\n        result.result.map(r => {\n          res += r.scaleResult.toString();\n        });\n        resultsArray.push((test + res).toString().toLowerCase());\n      });\n      let indexes = [];\n      resultsArray.map((result, i) => {\n        if (search != '' && resultsArray[i].toString().includes(search)) indexes.push(i);\n      });\n      if (indexes.length != 0) setShown([...indexes]);\n    } else setShown([0, 1]);\n  };\n\n  const setSearchFilter = e => {\n    e.preventDefault();\n    let search = e.target.value.toString().toLowerCase();\n    setSearch(search);\n  };\n\n  useEffect(() => {\n    document.body.style = 'transition-duration: .7s; transition-timing-function: ease-in-out; background: white;';\n    fetchResults();\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profileContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profilePic\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, \" \\uD83D\\uDC69\\uD83C\\uDFFB \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profileHeader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, name, \" \", surname, \" \"), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, \"@\", username), userType === 'a' && /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 15\n    }\n  }, \"\\u0410\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\"), userType === 'p' && /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 15\n    }\n  }, \"\\u041F\\u0435\\u0434\\u0430\\u0433\\u043E\\u0433-\\u043F\\u0441\\u0438\\u0445\\u043E\\u043B\\u043E\\u0433\"), userType === 'u' && /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 15\n    }\n  }, \"\\u0423\\u0447\\u0435\\u043D\\u0438\\u043A\"))), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Search\",\n    onChange: setSearchFilter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"button\",\n    value: \"\\u0421\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\",\n    onClick: doSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"resultsCollection\",\n    className: \"results\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, rendering //  results.map((result, index) => {\n  //    return (\n  //\n  //        <NavLink to={'/'} key={index} className='resultItem soft_appearing'>\n  //          <p className='resultTestName'>{result.test}</p>\n  //          <div className='shortResult'>\n  //            {\n  //              result.result.map((result, i) => {\n  //                    return (\n  //                        <p key={i}>{result.scaleResult}</p>\n  //                    )\n  //                  }\n  //              )}\n  //          </div>\n  //        </NavLink>\n  //    )\n  // })\n  ));\n};\nexport default Profile;","map":{"version":3,"sources":["/Users/alisakrylova/Intro/client/src/components/Profile.js"],"names":["React","useCallback","useContext","useEffect","useState","AuthContext","useHttp","NavLink","Profile","loading","request","token","userID","name","surname","username","userType","results","setResults","shown","setShown","search","setSearch","rendering","map","result","index","includes","test","i","scaleResult","fetchResults","fetched","Authorization","e","doSearch","preventDefault","resultsArray","res","r","toString","push","toLowerCase","indexes","length","setSearchFilter","target","value","document","body","style"],"mappings":"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","sourcesContent":["import React, {useCallback, useContext, useEffect, useState} from 'react'\nimport './Appearence/Profile.css'\nimport './Appearence/index.css'\nimport {AuthContext} from \"./Context/AuthContext\"\nimport {useHttp} from \"../Hooks/http.hook\";\nimport {NavLink} from \"react-router-dom\";\n\nexport const Profile = () => {\n\n  const {loading, request} = useHttp();\n\n  const {token, userID, name, surname, username, userType} = useContext(AuthContext)\n  const [results, setResults] = useState([])\n  const [shown, setShown] = useState([0, 1])\n  const [search, setSearch] = useState()\n\n  const rendering = results.map((result, index) => {\n    // console.log(\"INCLUDES: \", shown.includes(index))\n    if (shown.includes(index)){\n    return (\n        <NavLink to={'/'} key={index} className='resultItem soft_appearing'>\n          <p className='resultTestName'>{result.test}</p>\n          <div className='shortResult'>\n            {\n              result.result.map((result, i) => {\n                    return (\n                        <p key={i}>{result.scaleResult}</p>\n                    )\n                  }\n              )}\n          </div>\n        </NavLink>\n    )}\n  })\n\n  const fetchResults = useCallback(async () => {\n    try {\n      const fetched = await request(`/results/${username}`, 'GET', null, {\n        Authorization: `Bearer ${token}`\n      })\n      setResults(fetched)\n    }\n    catch (e) {}\n  }, [token, userID])\n\n  const doSearch = e => {\n    e.preventDefault()\n\n    if (search != '') {\n      let resultsArray = []\n      results.map((result, i) => {\n        let test = result.test\n        let res = ''\n        result.result.map(r => {\n          res += r.scaleResult.toString()\n        })\n        resultsArray.push((test + res).toString().toLowerCase())\n      })\n\n      let indexes = []\n      resultsArray.map((result, i) => {\n        if (search != '' && resultsArray[i].toString().includes(search))\n          indexes.push(i)\n      })\n\n      if (indexes.length != 0)\n        setShown([...indexes])\n    }\n    else setShown([0, 1])\n  }\n\n  const setSearchFilter = e => {\n    e.preventDefault()\n    let search = e.target.value.toString().toLowerCase()\n    setSearch(search)\n  }\n\n\n  useEffect(() => {\n    document.body.style = 'transition-duration: .7s; transition-timing-function: ease-in-out; background: white;'\n    fetchResults()\n  })\n\n    return (\n      <div>\n        <div className = 'profileContainer'>\n          <div className = 'profilePic'> üë©üèª </div>\n          <div className = 'profileHeader'>\n            <h1>{name} {surname} </h1>\n            <h2>@{username}</h2>\n\n            {userType === 'a' &&\n              <h2>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</h2>}\n            {userType === 'p' &&\n              <h2>–ü–µ–¥–∞–≥–æ–≥-–ø—Å–∏—Ö–æ–ª–æ–≥</h2>}\n            {userType === 'u' &&\n              <h2>–£—á–µ–Ω–∏–∫</h2>}\n\n          </div>\n        </div>\n\n        <input type = 'text' placeholder = 'Search' onChange = {setSearchFilter}/>\n        <input type = 'button' value = '–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å' onClick = {doSearch}/>\n\n        <div id = 'resultsCollection' className = 'results'>\n          {\n            rendering\n           //  results.map((result, index) => {\n           //    return (\n           //\n           //        <NavLink to={'/'} key={index} className='resultItem soft_appearing'>\n           //          <p className='resultTestName'>{result.test}</p>\n           //          <div className='shortResult'>\n           //            {\n           //              result.result.map((result, i) => {\n           //                    return (\n           //                        <p key={i}>{result.scaleResult}</p>\n           //                    )\n           //                  }\n           //              )}\n           //          </div>\n           //        </NavLink>\n           //    )\n           // })\n          }\n        </div>\n\n      </div>\n    )\n\n\n}\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}