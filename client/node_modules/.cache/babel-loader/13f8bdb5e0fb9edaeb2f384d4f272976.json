{"ast":null,"code":"var _jsxFileName = \"/Users/alisakrylova/Intro/client/src/components/Students.js\";\nimport React, { useCallback, useContext, useEffect, useState } from 'react';\nimport './Appearence/index.css';\nimport './Appearence/Auth.css';\nimport { useHttp } from \"../Hooks/http.hook\";\nimport { AuthContext } from \"./Context/AuthContext\";\nexport const Students = () => {\n  const {\n    loading,\n    request,\n    error,\n    clearError\n  } = useHttp();\n  const [form, setForm] = useState({\n    login: '',\n    password: '',\n    type: '',\n    name: '',\n    surname: '',\n    grade: null,\n    letter: ''\n  });\n  const [students, setStudents] = useState([]);\n  const {\n    token\n  } = useContext(AuthContext);\n\n  const changeHandler = event => {\n    setForm({ ...form,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const registerHandler = async () => {\n    try {\n      const data = await request('api/students/create', 'POST', { ...form\n      });\n      console.log(data.message);\n\n      if (data.message === 'User\\'ve created') {\n        setForm({\n          login: '',\n          password: '',\n          type: '',\n          name: '',\n          surname: '',\n          grade: null,\n          letter: ''\n        });\n      }\n    } catch (e) {}\n  };\n\n  const fetchStudents = useCallback(async () => {\n    try {\n      const fetched = await request('/api/students', 'GET', null, {\n        Authorization: `Bearer ${token}`\n      });\n      setStudents(fetched);\n      console.log(students);\n    } catch (e) {}\n  }, [token, request]);\n  useEffect(() => {\n    fetchStudents();\n    document.body.style = 'transition-duration: .7s; transition-timing-function: ease-in-out; background: white;';\n  }, [fetchStudents]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, \"\\u0423\\u0447\\u0435\\u043D\\u0438\\u043A\\u0438\"));\n};\nexport default Students;","map":{"version":3,"sources":["/Users/alisakrylova/Intro/client/src/components/Students.js"],"names":["React","useCallback","useContext","useEffect","useState","useHttp","AuthContext","Students","loading","request","error","clearError","form","setForm","login","password","type","name","surname","grade","letter","students","setStudents","token","changeHandler","event","target","value","registerHandler","data","console","log","message","e","fetchStudents","fetched","Authorization","document","body","style"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,WAAf,EAA4BC,UAA5B,EAAwCC,SAAxC,EAAmDC,QAAnD,QAAkE,OAAlE;AACA,OAAO,wBAAP;AACA,OAAO,uBAAP;AACA,SAAQC,OAAR,QAAsB,oBAAtB;AACA,SAAQC,WAAR,QAA0B,uBAA1B;AAGA,OAAO,MAAMC,QAAQ,GAAG,MAAM;AAE1B,QAAM;AAACC,IAAAA,OAAD;AAAUC,IAAAA,OAAV;AAAmBC,IAAAA,KAAnB;AAA0BC,IAAAA;AAA1B,MAAwCN,OAAO,EAArD;AAEA,QAAM,CAACO,IAAD,EAAOC,OAAP,IAAkBT,QAAQ,CAAC;AAC7BU,IAAAA,KAAK,EAAE,EADsB;AAE7BC,IAAAA,QAAQ,EAAE,EAFmB;AAG7BC,IAAAA,IAAI,EAAE,EAHuB;AAI7BC,IAAAA,IAAI,EAAE,EAJuB;AAK7BC,IAAAA,OAAO,EAAE,EALoB;AAM7BC,IAAAA,KAAK,EAAE,IANsB;AAO7BC,IAAAA,MAAM,EAAE;AAPqB,GAAD,CAAhC;AASA,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BlB,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM;AAACmB,IAAAA;AAAD,MAAUrB,UAAU,CAACI,WAAD,CAA1B;;AAEA,QAAMkB,aAAa,GAAGC,KAAK,IAAI;AAC3BZ,IAAAA,OAAO,CAAC,EAAC,GAAGD,IAAJ;AAAU,OAACa,KAAK,CAACC,MAAN,CAAaT,IAAd,GAAqBQ,KAAK,CAACC,MAAN,CAAaC;AAA5C,KAAD,CAAP;AACH,GAFD;;AAIA,QAAMC,eAAe,GAAG,YAAY;AAChC,QAAI;AACA,YAAMC,IAAI,GAAG,MAAMpB,OAAO,CAAC,qBAAD,EAAwB,MAAxB,EAAgC,EAAC,GAAGG;AAAJ,OAAhC,CAA1B;AACAkB,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACG,OAAjB;;AACA,UAAIH,IAAI,CAACG,OAAL,KAAiB,kBAArB,EAAwC;AACpCnB,QAAAA,OAAO,CAAC;AACJC,UAAAA,KAAK,EAAE,EADH;AAEJC,UAAAA,QAAQ,EAAE,EAFN;AAGJC,UAAAA,IAAI,EAAE,EAHF;AAIJC,UAAAA,IAAI,EAAE,EAJF;AAKJC,UAAAA,OAAO,EAAE,EALL;AAMJC,UAAAA,KAAK,EAAE,IANH;AAOJC,UAAAA,MAAM,EAAE;AAPJ,SAAD,CAAP;AASH;AACJ,KAdD,CAeA,OAAOa,CAAP,EAAU,CAAE;AACf,GAjBD;;AAmBA,QAAMC,aAAa,GAAGjC,WAAW,CAAC,YAAY;AAC1C,QAAI;AACA,YAAMkC,OAAO,GAAG,MAAM1B,OAAO,CAAC,eAAD,EAAkB,KAAlB,EAAyB,IAAzB,EAA+B;AACxD2B,QAAAA,aAAa,EAAG,UAASb,KAAM;AADyB,OAA/B,CAA7B;AAGAD,MAAAA,WAAW,CAACa,OAAD,CAAX;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAYV,QAAZ;AACH,KAND,CAME,OAAOY,CAAP,EAAU,CAAE;AACjB,GARgC,EAQ9B,CAACV,KAAD,EAAQd,OAAR,CAR8B,CAAjC;AAUAN,EAAAA,SAAS,CAAC,MAAM;AACZ+B,IAAAA,aAAa;AACbG,IAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,GAAsB,uFAAtB;AACH,GAHQ,EAGN,CAACL,aAAD,CAHM,CAAT;AAKA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDADJ,CADJ;AA0BH,CAhFM;AAkFP,eAAe3B,QAAf","sourcesContent":["import React, {useCallback, useContext, useEffect, useState} from 'react';\nimport './Appearence/index.css'\nimport './Appearence/Auth.css';\nimport {useHttp} from \"../Hooks/http.hook\";\nimport {AuthContext} from \"./Context/AuthContext\";\n\n\nexport const Students = () => {\n\n    const {loading, request, error, clearError} = useHttp();\n\n    const [form, setForm] = useState({\n        login: '',\n        password: '',\n        type: '',\n        name: '',\n        surname: '',\n        grade: null,\n        letter: ''\n    })\n    const [students, setStudents] = useState([])\n    const {token} = useContext(AuthContext)\n\n    const changeHandler = event => {\n        setForm({...form, [event.target.name]: event.target.value})\n    }\n\n    const registerHandler = async () => {\n        try {\n            const data = await request('api/students/create', 'POST', {...form})\n            console.log(data.message)\n            if (data.message === 'User\\'ve created'){\n                setForm({\n                    login: '',\n                    password: '',\n                    type: '',\n                    name: '',\n                    surname: '',\n                    grade: null,\n                    letter: ''\n                })\n            }\n        }\n        catch (e) {}\n    }\n\n    const fetchStudents = useCallback(async () => {\n        try {\n            const fetched = await request('/api/students', 'GET', null, {\n                Authorization: `Bearer ${token}`\n            })\n            setStudents(fetched)\n            console.log(students)\n        } catch (e) {}\n    }, [token, request])\n\n    useEffect(() => {\n        fetchStudents()\n        document.body.style = 'transition-duration: .7s; transition-timing-function: ease-in-out; background: white;'\n    }, [fetchStudents])\n\n    return(\n        <div>\n            <h1>Ученики</h1>\n            {/*<div className = 'authform'>*/}\n            {/*    <input type='text' id = 'login' name='login' placeholder='Логин' onChange={changeHandler} value = {form.login}/>*/}\n            {/*    <input type='text' id = 'password' name='password' placeholder='Пароль' onChange={changeHandler} value = {form.password}/>*/}\n            {/*    <input type='text' id = 'type' name='type' placeholder='Тип' onChange={changeHandler} value = {form.type}/>*/}\n            {/*    <input type='text' id = 'name' name='name' placeholder='Имя' onChange={changeHandler} value = {form.name}/>*/}\n            {/*    <input type='text' id = 'surname' name='surname' placeholder='Фамилия' onChange={changeHandler} value = {form.surname}/>*/}\n            {/*    { form.type === 'u' &&*/}\n            {/*        <input type='text' id = 'grade' name='grade' placeholder='Класс' onChange={changeHandler} value = {form.grade}/>}*/}\n            {/*    { form.type === 'u' &&*/}\n            {/*        <input type='text' id = 'letter' name='letter' placeholder='Буква' onChange={changeHandler} value = {form.letter}/>}*/}\n            {/*    { students.map((student) => {*/}\n            {/*        return (*/}\n            {/*            <div key = {student._id} className = 'authform'>*/}\n            {/*                /!*<h2>{student._id}</h2>*!/*/}\n            {/*                <h2>{student.grade}{student.letter}</h2>*/}\n            {/*                <h2>{student.name} {student.surname}</h2>*/}\n            {/*            </div>*/}\n            {/*        )*/}\n            {/*    }) }*/}\n            {/*</div>*/}\n            {/*<input type='button' className = 'loginbtn' value='reg' onClick = {registerHandler} disabled={loading}/>*/}\n        </div>\n    )\n}\n\nexport default Students"]},"metadata":{},"sourceType":"module"}