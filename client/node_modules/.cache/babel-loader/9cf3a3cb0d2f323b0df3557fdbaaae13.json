{"ast":null,"code":"var _jsxFileName = \"/Users/alisakrylova/Intro/client/src/components/TestPage.js\";\nimport React, { useCallback, useContext, useEffect, useState } from 'react';\nimport './Appearence/index.css';\nimport './Appearence/TestPage.css';\nimport { AuthContext } from \"./Context/AuthContext\";\nimport { useHttp } from \"../Hooks/http.hook\";\nimport { useParams } from 'react-router-dom';\nexport const TestPage = () => {\n  const [test, setTest] = useState({\n    name: '',\n    description: '',\n    shortDescription: '',\n    questions: ''\n  });\n  const [questions, setQuestions] = useState({});\n  const {\n    token,\n    userID\n  } = useContext(AuthContext);\n  const [answers, setAnswers] = useState({\n    userID: userID\n  });\n  const {\n    loading,\n    request,\n    error,\n    clearError\n  } = useHttp();\n  const link = useParams().id;\n  const [content, setContent] = useState('description');\n  const [index, setIndex] = useState(0);\n  const [goNext, setGoNext] = useState(false);\n  const fetchTestData = useCallback(async () => {\n    try {\n      const fetched = await request(`/api/tests/${link}`, 'GET', null, {\n        Authorization: `Bearer ${token}`\n      });\n      setTest({\n        name: fetched.tests.name,\n        description: fetched.tests.description,\n        shortDescription: fetched.tests.shortDescription,\n        questions: fetched.tests.questions\n      });\n      setQuestions(fetched.questions);\n      setAnswers({ ...answers,\n        testID: fetched.questions.testID\n      });\n    } catch (e) {}\n  }, [token, request]);\n\n  const showTest = e => {\n    e.preventDefault();\n    setContent('testStartPage');\n  };\n\n  const yesHandler = e => {\n    e.preventDefault();\n    document.getElementById('y' + index).style = 'transform: scale(1.2)';\n    document.getElementById('n' + index).style = 'transform: scale(1)';\n    setAnswers({ ...answers,\n      [\"a\" + e.target.id]: true\n    });\n    setGoNext(true);\n  };\n\n  const noHandler = e => {\n    e.preventDefault();\n    document.getElementById('y' + index).style = 'transform: scale(1)';\n    document.getElementById('n' + index).style = 'transform: scale(1.2)';\n    setAnswers({ ...answers,\n      [\"a\" + e.target.id]: false\n    });\n    setGoNext(true);\n  };\n\n  const next = e => {\n    e.preventDefault();\n\n    if (goNext) {\n      if (index < test.questions) setIndex(index + 1);\n      document.getElementById('y' + index).style = 'transform: scale(1)';\n      document.getElementById('n' + index).style = 'transform: scale(1)';\n\n      try {\n        document.getElementById('next' + index).style = 'transform: scale(1.2)';\n      } catch (e) {}\n\n      try {\n        document.getElementById('next' + index).style = 'transform: scale(1)';\n      } catch (e) {}\n\n      try {\n        document.getElementById('back' + index).style = 'transform: scale(1)';\n      } catch (e) {}\n\n      setGoNext(false);\n    }\n  };\n\n  const back = e => {\n    e.preventDefault();\n    if (index > 0) setIndex(index - 1);\n    document.getElementById('y' + index).style = 'transform: scale(1)';\n    document.getElementById('n' + index).style = 'transform: scale(1)';\n\n    try {\n      document.getElementById('next' + index).style = 'transform: scale(1)';\n    } catch (e) {}\n\n    try {\n      document.getElementById('back' + index).style = 'transform: scale(1.2)';\n    } catch (e) {}\n\n    setGoNext(false);\n  };\n\n  const saveAnswers = async () => {\n    try {\n      const data = await request(`${link}/save`, 'POST', { ...answers\n      }, {\n        Authorization: `Bearer ${token}`\n      });\n      console.log(data.message);\n    } catch (e) {}\n  };\n\n  useEffect(() => {\n    fetchTestData();\n    if (content === 'testStartPage') document.body.style = 'transition-duration: .5s; transition-timing-function: ease-in-out; background: #E6EBC3;';\n  }, [fetchTestData, content]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, content === 'description' && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"testInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"bigTestName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 21\n    }\n  }, test.name), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"testDescription\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 21\n    }\n  }, test.shortDescription, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }), test.description), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"button\",\n    className: \"logoutbtn\",\n    value: \"\\u043F\\u043E\\u0433\\u043D\\u0430\\u043B\\u0438\",\n    disabled: loading,\n    onClick: showTest,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 21\n    }\n  })), content === 'testStartPage' && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  },\n  /*#__PURE__*/\n  // Object.keys(questions).map((key, index) =>\n  //     key.includes('q') &&\n  //     <div key = {index} id = {'d' + index} className = 'questionCard' >\n  //         <h1>{index}/{test.questions}</h1>\n  //         <p value={key}>{ questions[key] } </p>\n  //         <input type='button' className = 'yesbtn'  value = 'да' id = {'y'+index} disabled={loading} onClick={yesHandler}/>\n  //         <input type='button' className = 'nobtn'  value = 'нет' id = {'n'+index} disabled={loading} onClick={noHandler}/>\n  //     </div>\n  // )\n  // Object.keys(questions)[index]\n  // key.includes('q') &&\n  React.createElement(\"div\", {\n    id: 'd' + index,\n    className: \"questionCard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 25\n    }\n  }, index + 1, \"/\", test.questions), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 25\n    }\n  }, questions['q' + (index + 1)]), index > 0 && /*#__PURE__*/React.createElement(\"input\", {\n    type: \"button\",\n    className: \"nobtn\",\n    value: \"\\u043D\\u0430\\u0437\\u0430\\u0434\",\n    id: 'back' + index,\n    disabled: loading,\n    onClick: back,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"button\",\n    className: \"yesbtn\",\n    value: \"\\u0434\\u0430\",\n    id: 'y' + index,\n    disabled: loading,\n    onClick: yesHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"button\",\n    className: \"nobtn\",\n    value: \"\\u043D\\u0435\\u0442\",\n    id: 'n' + index,\n    disabled: loading,\n    onClick: noHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 25\n    }\n  }), index < test.questions - 1 && /*#__PURE__*/React.createElement(\"input\", {\n    type: \"button\",\n    className: \"nobtn\",\n    value: \"\\u0434\\u0430\\u043B\\u044C\\u0448\\u0435\",\n    id: 'next' + index,\n    disabled: loading,\n    onClick: next,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 29\n    }\n  })), index == test.questions - 1 && /*#__PURE__*/React.createElement(\"input\", {\n    type: \"button\",\n    className: \"yesbtn\",\n    value: \"\\u0440\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\",\n    disabled: loading,\n    onClick: saveAnswers,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 25\n    }\n  })));\n};","map":{"version":3,"sources":["/Users/alisakrylova/Intro/client/src/components/TestPage.js"],"names":["React","useCallback","useContext","useEffect","useState","AuthContext","useHttp","useParams","TestPage","test","setTest","name","description","shortDescription","questions","setQuestions","token","userID","answers","setAnswers","loading","request","error","clearError","link","id","content","setContent","index","setIndex","goNext","setGoNext","fetchTestData","fetched","Authorization","tests","testID","e","showTest","preventDefault","yesHandler","document","getElementById","style","target","noHandler","next","back","saveAnswers","data","console","log","message","body"],"mappings":"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","sourcesContent":["import React, {useCallback, useContext, useEffect, useState} from 'react'\nimport './Appearence/index.css'\nimport './Appearence/TestPage.css'\nimport {AuthContext} from \"./Context/AuthContext\";\nimport {useHttp} from \"../Hooks/http.hook\";\nimport {useParams} from 'react-router-dom'\n\nexport const TestPage = () => {\n\n    const [test, setTest] = useState({ name: '', description: '', shortDescription: '', questions: ''})\n    const [questions, setQuestions] = useState({})\n    const {token, userID} = useContext(AuthContext)\n    const [answers, setAnswers] = useState({userID: userID})\n    const {loading, request, error, clearError} = useHttp();\n    const link = useParams().id\n\n    const [content, setContent] = useState('description')\n    const [index, setIndex] = useState(0)\n    const [goNext, setGoNext] = useState(false)\n\n    const fetchTestData = useCallback(async () => {\n        try {\n            const fetched = await request(`/api/tests/${link}`, 'GET', null, {\n                Authorization: `Bearer ${token}`\n            })\n            setTest({name: fetched.tests.name, description: fetched.tests.description, shortDescription: fetched.tests.shortDescription, questions: fetched.tests.questions})\n            setQuestions(fetched.questions)\n            setAnswers({...answers, testID: fetched.questions.testID})\n        }\n        catch (e) {}\n    }, [token, request])\n\n    const showTest = e => {\n        e.preventDefault()\n        setContent('testStartPage')\n    }\n\n    const yesHandler = e => {\n        e.preventDefault()\n        document.getElementById('y' + index).style = 'transform: scale(1.2)'\n        document.getElementById('n' + index).style = 'transform: scale(1)'\n        setAnswers({...answers, [\"a\" + e.target.id]: true })\n        setGoNext(true)\n    }\n\n    const noHandler = e => {\n        e.preventDefault()\n        document.getElementById('y' + index).style = 'transform: scale(1)'\n        document.getElementById('n' + index).style = 'transform: scale(1.2)'\n        setAnswers({...answers, [\"a\" + e.target.id]: false })\n        setGoNext(true)\n    }\n\n    const next = e => {\n        e.preventDefault()\n        if (goNext){\n            if (index < test.questions)setIndex(index + 1)\n            document.getElementById('y' + index).style = 'transform: scale(1)'\n            document.getElementById('n' + index).style = 'transform: scale(1)'\n            try { document.getElementById('next' + index).style = 'transform: scale(1.2)' } catch (e) {}\n            try { document.getElementById('next' + index).style = 'transform: scale(1)' } catch (e) {}\n            try { document.getElementById('back' + index).style = 'transform: scale(1)' } catch (e) {}\n            setGoNext(false)\n        }\n    }\n\n    const back = e => {\n        e.preventDefault()\n        if (index > 0) setIndex(index - 1)\n        document.getElementById('y' + index).style = 'transform: scale(1)'\n        document.getElementById('n' + index).style = 'transform: scale(1)'\n        try { document.getElementById('next' + index).style = 'transform: scale(1)' } catch (e) {}\n        try { document.getElementById('back' + index).style = 'transform: scale(1.2)' } catch (e) {}\n        setGoNext(false)\n    }\n\n    const saveAnswers = async () => {\n        try {\n            const data = await request(`${link}/save`, 'POST', {...answers}, {\n                Authorization: `Bearer ${token}`\n            })\n            console.log(data.message)\n        }\n        catch (e) {}\n    }\n\n    useEffect(() => {\n        fetchTestData()\n        if (content === 'testStartPage') document.body.style = 'transition-duration: .5s; transition-timing-function: ease-in-out; background: #E6EBC3;'\n    }, [fetchTestData, content])\n\n\n    return (\n        <div>\n            { content === 'description' &&\n                <div className = 'testInfo'>\n                    <h1 className = 'bigTestName'>{test.name}</h1>\n                    <p className='testDescription'>{test.shortDescription}\n                    <br/>{test.description}</p>\n                    <input type='button' className = 'logoutbtn'  value = 'погнали' disabled={loading} onClick = {showTest} />\n                </div>\n            }\n\n            { content === 'testStartPage' &&\n                <div>\n                {\n                    // Object.keys(questions).map((key, index) =>\n                    //     key.includes('q') &&\n                    //     <div key = {index} id = {'d' + index} className = 'questionCard' >\n                    //         <h1>{index}/{test.questions}</h1>\n                    //         <p value={key}>{ questions[key] } </p>\n                    //         <input type='button' className = 'yesbtn'  value = 'да' id = {'y'+index} disabled={loading} onClick={yesHandler}/>\n                    //         <input type='button' className = 'nobtn'  value = 'нет' id = {'n'+index} disabled={loading} onClick={noHandler}/>\n                    //     </div>\n                    // )\n                    // Object.keys(questions)[index]\n                    // key.includes('q') &&\n                    <div id = {'d' + index} className = 'questionCard' >\n                        <h1>{index + 1}/{test.questions}</h1>\n                        <p>{questions['q' + (index + 1)]}</p>\n                        {\n                            index > 0 &&\n                            <input type='button' className = 'nobtn'  value = 'назад' id = {'back'+index} disabled={loading} onClick={back}/>\n                        }\n                        <input type='button' className = 'yesbtn'  value = 'да' id = {'y'+index} disabled={loading} onClick={yesHandler}/>\n                        <input type='button' className = 'nobtn'  value = 'нет' id = {'n'+index} disabled={loading} onClick={noHandler}/>\n                        {\n                            index < test.questions - 1 &&\n                            <input type='button' className = 'nobtn'  value = 'дальше' id = {'next'+index} disabled={loading} onClick={next}/>\n                        }\n                    </div>\n                }\n                    {\n                        index == test.questions - 1 &&\n                        <input type='button' className = 'yesbtn'  value = 'результат' disabled={loading} onClick={saveAnswers}/>\n                    }\n                </div>\n            }\n        </div>\n\n\n    )\n}"]},"metadata":{},"sourceType":"module"}