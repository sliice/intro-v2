{"ast":null,"code":"var _jsxFileName = \"/Users/alisakrylova/Intro/client/src/components/TestPage.js\";\nimport React, { useCallback, useContext, useEffect, useState } from 'react';\nimport './Appearence/index.css';\nimport './Appearence/TestPage.css';\nimport { AuthContext } from \"./Context/AuthContext\";\nimport { useHttp } from \"../Hooks/http.hook\";\nimport { useParams } from 'react-router-dom';\nexport const TestPage = () => {\n  const [test, setTest] = useState({\n    name: '',\n    description: '',\n    shortDescription: ''\n  });\n  const [questions, setQuestions] = useState({});\n  const {\n    token,\n    userID\n  } = useContext(AuthContext);\n  const [answers, setAnswers] = useState({\n    userID: userID\n  });\n  const {\n    loading,\n    request,\n    error,\n    clearError\n  } = useHttp();\n  const link = useParams().id;\n  const fetchTestData = useCallback(async () => {\n    try {\n      const fetched = await request(`/api/tests/${link}`, 'POST', null, {\n        Authorization: `Bearer ${token}`\n      });\n      setTest({\n        name: fetched.tests.name,\n        description: fetched.tests.description,\n        shortDescription: fetched.tests.shortDescription\n      });\n      setQuestions(fetched.questions);\n      setAnswers({ ...answers,\n        testID: fetched.questions.testID\n      });\n    } catch (e) {}\n  }, [token, request]);\n  useEffect(() => {\n    fetchTestData();\n  }, [fetchTestData]);\n\n  const yesHandler = e => {\n    e.preventDefault(); // console.log(\"ON THE \" + e.target.id + \"th answer you said yes\")\n\n    setAnswers({ ...answers,\n      [\"a\" + e.target.id]: true\n    });\n  };\n\n  const noHandler = e => {\n    e.preventDefault(); // console.log(\"ON THE \" + e.target.id + \"th answer you said no\")\n\n    setAnswers({ ...answers,\n      [\"a\" + e.target.id]: false\n    });\n  };\n\n  const saveAnswers = async () => {\n    try {\n      console.log(\"ANSWERSS ARE \", answers);\n      const data = await request(`api/tests/${link}/save`, 'POST', { ...answers\n      }, {\n        Authorization: `Bearer ${token}`\n      });\n      console.log(data.message);\n    } catch (e) {}\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    cls: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, test.name), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"testInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, test.shortDescription), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"testInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, test.description), Object.keys(questions).map((key, index) => key !== '_id' && key !== 'testID' && /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    className: \"questionCard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    value: key,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 25\n    }\n  }, questions[key], \" \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"button\",\n    className: \"yesbtn\",\n    value: \"\\u0434\\u0430\",\n    id: index,\n    disabled: loading,\n    onClick: yesHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"button\",\n    className: \"nobtn\",\n    value: \"\\u043D\\u0435\\u0442\",\n    id: index,\n    disabled: loading,\n    onClick: noHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"button\",\n    className: \"yesbtn\",\n    value: \"\\u0440\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\",\n    disabled: loading,\n    onClick: saveAnswers,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }));\n};","map":{"version":3,"sources":["/Users/alisakrylova/Intro/client/src/components/TestPage.js"],"names":["React","useCallback","useContext","useEffect","useState","AuthContext","useHttp","useParams","TestPage","test","setTest","name","description","shortDescription","questions","setQuestions","token","userID","answers","setAnswers","loading","request","error","clearError","link","id","fetchTestData","fetched","Authorization","tests","testID","e","yesHandler","preventDefault","target","noHandler","saveAnswers","console","log","data","message","Object","keys","map","key","index"],"mappings":"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","sourcesContent":["import React, {useCallback, useContext, useEffect, useState} from 'react'\nimport './Appearence/index.css'\nimport './Appearence/TestPage.css'\nimport {AuthContext} from \"./Context/AuthContext\";\nimport {useHttp} from \"../Hooks/http.hook\";\nimport {useParams} from 'react-router-dom'\n\nexport const TestPage = () => {\n\n    const [test, setTest] = useState({ name: '', description: '', shortDescription: ''})\n    const [questions, setQuestions] = useState({})\n    const {token, userID} = useContext(AuthContext)\n    const [answers, setAnswers] = useState({userID: userID})\n    const {loading, request, error, clearError} = useHttp();\n    const link = useParams().id\n\n    const fetchTestData = useCallback(async () => {\n        try {\n            const fetched = await request(`/api/tests/${link}`, 'POST', null, {\n                Authorization: `Bearer ${token}`\n            })\n            setTest({name: fetched.tests.name, description: fetched.tests.description, shortDescription: fetched.tests.shortDescription})\n            setQuestions(fetched.questions)\n            setAnswers({...answers, testID: fetched.questions.testID})\n        }\n        catch (e) {}\n    }, [token, request])\n\n    useEffect(() => {\n        fetchTestData()\n    }, [fetchTestData])\n\n    const yesHandler = e => {\n        e.preventDefault()\n        // console.log(\"ON THE \" + e.target.id + \"th answer you said yes\")\n        setAnswers({...answers, [\"a\" + e.target.id]: true })\n    }\n\n    const noHandler = e => {\n        e.preventDefault()\n        // console.log(\"ON THE \" + e.target.id + \"th answer you said no\")\n        setAnswers({...answers, [\"a\" + e.target.id]: false })\n    }\n\n    const saveAnswers = async () => {\n        try {\n            console.log(\"ANSWERSS ARE \", answers)\n            const data = await request(`api/tests/${link}/save`, 'POST', {...answers}, {\n                Authorization: `Bearer ${token}`\n            })\n            console.log(data.message)\n        }\n        catch (e) {}\n    }\n\n\n    return (\n        <div>\n            <h1 cls>{test.name}</h1>\n            <p className = 'testInfo'>{test.shortDescription}</p>\n            <p className = 'testInfo'>{test.description}</p>\n            {\n                Object.keys(questions).map((key, index) =>\n                    key !== '_id' && key !== 'testID' &&\n                    <div key = {index} className = 'questionCard' >\n                        <p value={key}>{ questions[key] } </p>\n                        <input type='button' className = 'yesbtn'  value = 'да' id = {index} disabled={loading} onClick={yesHandler}/>\n                        <input type='button' className = 'nobtn'  value = 'нет' id = {index} disabled={loading} onClick={noHandler}/>\n                    </div>\n                )\n            }\n            <input type='button' className = 'yesbtn'  value = 'результат' disabled={loading} onClick={saveAnswers}/>\n        </div>\n\n\n    )\n}"]},"metadata":{},"sourceType":"module"}