{"ast":null,"code":"var _jsxFileName = \"/Users/alisakrylova/Intro/client/src/components/Auth.js\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport './Appearence/App.css';\nimport './Appearence/Auth.css';\nimport { useHttp } from \"../Hooks/http.hook\";\nimport { useMessage } from \"../Hooks/message.hook\";\nimport { AuthContext } from \"./Context/AuthContext\";\nimport { ReactComponent as INTRO } from \"@svgr/webpack?-svgo,+titleProp,+ref!./Appearence/Images/INTRO.svg\";\nexport const Auth = () => {\n  const auth = useContext(AuthContext);\n  const {\n    loading,\n    request,\n    error,\n    clearError\n  } = useHttp();\n  const [form, setForm] = useState({\n    login: '',\n    password: ''\n  });\n  const message = useMessage();\n  useEffect(() => {\n    message(error);\n    clearError(); // document.body.style = 'background: white;'\n\n    document.body.style = 'background: #E0E7B4;';\n  }, [error, message, clearError]);\n\n  const changeHandler = event => {\n    setForm({ ...form,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const keyPressedHandler = e => {\n    if (form.login && form.password) {\n      if (e.which == 13 || e.keyCode == 13) loginHandler();\n    }\n  };\n\n  const loginHandler = async () => {\n    try {\n      const data = await request('auth/login', 'POST', { ...form\n      });\n      console.log(data.message);\n      auth.login(data.token, data.userID, data.userType, data.name, data.surname, data.username); // OPTIONAL\n      // console.log('USER TYPE: ', data.userType)\n      // console.log('USER NAME: ', data.name)\n      // console.log('USER SURNAME: ', data.surname)\n    } catch (e) {}\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"authPage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(INTRO, {\n    id: \"intropic\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"authFormAndButton\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"authform\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"login\",\n    name: \"login\",\n    placeholder: \"\\u041B\\u043E\\u0433\\u0438\\u043D\",\n    onChange: changeHandler,\n    value: form.login,\n    onKeyPress: keyPressedHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    name: \"password\",\n    placeholder: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n    onChange: changeHandler,\n    value: form.password,\n    onKeyPress: keyPressedHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"button\",\n    className: \"loginbtn\",\n    onClick: loginHandler,\n    disabled: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loginbtn\",\n    onClick: loginHandler,\n    disabled: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 19\n    }\n  })));\n};\nexport default Auth;","map":{"version":3,"sources":["/Users/alisakrylova/Intro/client/src/components/Auth.js"],"names":["React","useContext","useEffect","useState","useHttp","useMessage","AuthContext","Auth","auth","loading","request","error","clearError","form","setForm","login","password","message","document","body","style","changeHandler","event","target","name","value","keyPressedHandler","e","which","keyCode","loginHandler","data","console","log","token","userID","userType","surname","username"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\nimport './Appearence/App.css';\nimport './Appearence/Auth.css';\nimport {useHttp} from \"../Hooks/http.hook\";\nimport {useMessage} from \"../Hooks/message.hook\";\nimport {AuthContext} from \"./Context/AuthContext\";\nimport {ReactComponent as INTRO} from './Appearence/Images/INTRO.svg'\n\n\nexport const Auth = () => {\n\n    const auth = useContext(AuthContext)\n    const {loading, request, error, clearError} = useHttp();\n    const [form, setForm] = useState({ login: '', password: '' })\n    const message = useMessage()\n\n    useEffect(() => {\n        message(error)\n        clearError()\n        // document.body.style = 'background: white;'\n        document.body.style = 'background: #E0E7B4;'\n    }, [error, message, clearError])\n\n     const changeHandler = event => {\n         setForm({...form, [event.target.name]: event.target.value})\n     }\n\n    const keyPressedHandler = e => {\n        if (form.login && form.password){\n            if (e.which == 13 || e.keyCode == 13)\n                loginHandler()\n        }\n    }\n\n    const loginHandler = async () => {\n        try {\n            const data = await request('auth/login', 'POST', {...form})\n            console.log(data.message)\n            auth.login(data.token, data.userID, data.userType, data.name, data.surname, data.username)\n\n            // OPTIONAL\n            // console.log('USER TYPE: ', data.userType)\n            // console.log('USER NAME: ', data.name)\n            // console.log('USER SURNAME: ', data.surname)\n        }\n        catch (e) {}\n    }\n\n\n      return (\n          <div className = 'authPage'>\n              <INTRO id = 'intropic'/>\n              <div className = 'authFormAndButton'>\n                  <div className = 'authform'>\n                      <input type='text' id = 'login' name='login' placeholder='Логин' onChange={changeHandler} value = {form.login} onKeyPress={keyPressedHandler}/>\n                      <input type='password' id = 'password' name='password' placeholder='Пароль' onChange={changeHandler} value = {form.password} onKeyPress={keyPressedHandler}/>\n                  </div>\n                  <input type='button' className = 'loginbtn' onClick = {loginHandler} disabled={loading}/>\n                  <div className = 'loginbtn' onClick = {loginHandler} disabled={loading}/>\n              </div>\n          </div>\n      )\n}\n\nexport default Auth"]},"metadata":{},"sourceType":"module"}