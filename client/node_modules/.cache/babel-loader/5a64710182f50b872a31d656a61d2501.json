{"ast":null,"code":"var _jsxFileName = \"/Users/alisakrylova/Intro2/client/src/components/Auth.js\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useHttp } from \"../hooks/Http.hook\";\nimport { AuthContext } from \"./context/AuthContext\";\nimport './appearence/css/Auth.css';\nimport './appearence/css/index.css';\nimport { ReactComponent as INTRO } from \"@svgr/webpack?-svgo,+titleProp,+ref!./appearence/images/INTRO.svg\";\nexport const Auth = () => {\n  const auth = useContext(AuthContext);\n  const {\n    loading,\n    request,\n    error,\n    clearError\n  } = useHttp();\n  const [form, setForm] = useState({\n    login: '',\n    password: ''\n  });\n\n  const changeHandler = event => {\n    setForm({ ...form,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const keyPressedHandler = async e => {\n    if (form.login && form.password) {\n      if (e.which == 13 || e.keyCode == 13) await loginHandler();\n    }\n  };\n\n  const loginHandler = async () => {\n    try {\n      const data = await request('/api/auth/login', 'POST', { ...form\n      });\n      console.log(data.message);\n      auth.login(data.token, data.userID, data.userType, data.name, data.surname, data.username);\n    } catch (e) {}\n  };\n\n  useEffect(() => {\n    document.title = 'Intro';\n    document.body.style = 'background: #E0E7B4;';\n  }, [error, clearError]);\n  return /*#__PURE__*/React.createElement(\"p\", {\n    className: \"authPage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(INTRO, {\n    id: \"intropic\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cover\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"authFormAndButton\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"authform\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"login\",\n    name: \"login\",\n    placeholder: \"\\u041B\\u043E\\u0433\\u0438\\u043D\",\n    onChange: e => changeHandler(e),\n    value: form.login,\n    onKeyPress: e => keyPressedHandler(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    name: \"password\",\n    placeholder: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n    onChange: e => changeHandler(e),\n    value: form.password,\n    onKeyPress: e => keyPressedHandler(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"button\",\n    className: \"loginbtn\",\n    onClick: e => loginHandler(e),\n    disabled: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loginbtn\",\n    onClick: e => loginHandler(e),\n    disabled: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 19\n    }\n  })));\n};\nexport default Auth;","map":{"version":3,"sources":["/Users/alisakrylova/Intro2/client/src/components/Auth.js"],"names":["React","useContext","useEffect","useState","useHttp","AuthContext","Auth","auth","loading","request","error","clearError","form","setForm","login","password","changeHandler","event","target","name","value","keyPressedHandler","e","which","keyCode","loginHandler","data","console","log","message","token","userID","userType","surname","username","document","title","body","style"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\nimport {useHttp} from \"../hooks/Http.hook\";\nimport {AuthContext} from \"./context/AuthContext\";\nimport './appearence/css/Auth.css';\nimport './appearence/css/index.css';\nimport {ReactComponent as INTRO} from './appearence/images/INTRO.svg'\n\n\nexport const Auth = () => {\n\n    const auth = useContext(AuthContext)\n    const {loading, request, error, clearError} = useHttp();\n    const [form, setForm] = useState({ login: '', password: '' })\n\n     const changeHandler = event => {\n         setForm({...form, [event.target.name]: event.target.value})\n     }\n\n    const keyPressedHandler = async (e) => {\n        if (form.login && form.password){\n            if (e.which == 13 || e.keyCode == 13)\n                await loginHandler()\n        }\n    }\n\n    const loginHandler = async () => {\n        try {\n            const data = await request('/api/auth/login', 'POST', {...form})\n            console.log(data.message)\n            auth.login(data.token, data.userID, data.userType, data.name, data.surname, data.username)\n        }\n        catch (e) {}\n    }\n\n    useEffect(() => {\n        document.title = 'Intro'\n        document.body.style = 'background: #E0E7B4;'\n    }, [error, clearError])\n\n\n      return (\n          <p className = 'authPage'>\n              <INTRO id = 'intropic'/>\n              <div className = 'cover' />\n              <div className = 'authFormAndButton'>\n                  <div className = 'authform'>\n                      <input type='text' id = 'login' name='login' placeholder='Логин' onChange = { e => changeHandler(e)}\n                             value = {form.login}\n                             onKeyPress = { e => keyPressedHandler(e) }/>\n                      <input type='password' id = 'password' name='password' placeholder='Пароль' onChange = { e => changeHandler(e)}\n                             value = {form.password}\n                             onKeyPress = { e => keyPressedHandler(e) }/>\n                  </div>\n                  <input type='button' className = 'loginbtn' onClick = {e => loginHandler(e) } disabled={loading}/>\n                  <div className = 'loginbtn' onClick = {e => loginHandler(e) } disabled={loading}/>\n              </div>\n          </p>\n      )\n}\n\nexport default Auth"]},"metadata":{},"sourceType":"module"}