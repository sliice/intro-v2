{"ast":null,"code":"var _jsxFileName = \"/Users/alisakrylova/Intro/client/src/components/ResultPage.js\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { useParams, useHistory, NavLink } from \"react-router-dom\";\nimport './Appearence/index.css';\nimport './Appearence/ResultPage.css';\nimport { useHttp } from \"../Hooks/http.hook\";\nimport { AuthContext } from \"./Context/AuthContext\";\nimport ScaleIncreasing from './Functions and const/ScaleIncreasing';\nexport const ResultPage = () => {\n  const login = useParams().id;\n  const link = useParams().link;\n  const {\n    request\n  } = useHttp();\n  const {\n    token,\n    username,\n    userType\n  } = useContext(AuthContext);\n  const history = useHistory();\n  if (userType !== 'p' && login !== username) history.push(`/tests/${link}`);\n  const [result, setResult] = useState([]);\n  const [test, setTest] = useState('');\n  const [error, setError] = useState('Пока что такого результата нет');\n  const [importantResults, setImportantResults] = useState(false);\n  const [notImportantResults, setNotImportantResults] = useState(false);\n\n  const fetchResult = async () => {\n    try {\n      let fetched = await request(`/api/tests/${link}/result/${login}`, 'GET', null, {\n        Authorization: `Bearer ${token}`\n      });\n\n      if (!fetched.message) {\n        setError(null);\n        setTest(fetched.test);\n        fetched.scales.sort((a, b) => a.points < b.points ? 1 : -1);\n        setResult(fetched.scales);\n        if (fetched.scales[0].important) setImportantResults(true);\n        if (!fetched.scales[fetched.scales.length - 1].important) setNotImportantResults(true);\n      }\n    } catch (e) {// history.push(`/tests/${link}`)\n    }\n  };\n\n  useEffect(() => {\n    document.body.style = 'transition-duration: .7s; transition-timing-function: ease-in-out; background: white;';\n  });\n  useEffect(() => {\n    if (!test) fetchResult();\n  }, [test]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"resultPage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, error && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"notFound\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }, error), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, test), result.map((res, i) => {\n    if (res.important) return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"resultModule\",\n      title: `Баллы: ${res.points} / ${res.maxPoints}`,\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 29\n      }\n    }, res.name, \": \", res.intervalName), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 29\n      }\n    }, res.points, \" / \", res.maxPoints), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pointsScale\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 29\n      }\n    }, ScaleIncreasing(res.points, res.maxPoints, '#E88732', '#AB5500')), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 29\n      }\n    }, res.intervalDescription));\n  }), result.map((res, i) => {\n    if (!res.important) return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"resultModule\",\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 33\n      }\n    }, res.name, \": \", res.intervalName), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 33\n      }\n    }, res.points, \" / \", res.maxPoints), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pointsScale\",\n      title: `Баллы: ${res.points} / ${res.maxPoints}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 33\n      }\n    }, ScaleIncreasing(res.points, res.maxPoints, '#E0E7B4', '#96A07C')), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"resultDescription\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 33\n      }\n    }, res.intervalDescription));\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flexboxRow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, login === username && /*#__PURE__*/React.createElement(NavLink, {\n    to: `/tests/${link}`,\n    className: \"longGreenBtn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 21\n    }\n  }, \"\\u041F\\u0440\\u043E\\u0439\\u0442\\u0438 \\u0437\\u0430\\u043D\\u043E\\u0432\\u043E\"))));\n};\nexport default ResultPage;","map":{"version":3,"sources":["/Users/alisakrylova/Intro/client/src/components/ResultPage.js"],"names":["React","useContext","useEffect","useState","useParams","useHistory","NavLink","useHttp","AuthContext","ScaleIncreasing","ResultPage","login","id","link","request","token","username","userType","history","push","result","setResult","test","setTest","error","setError","importantResults","setImportantResults","notImportantResults","setNotImportantResults","fetchResult","fetched","Authorization","message","scales","sort","a","b","points","important","length","e","document","body","style","map","res","i","maxPoints","name","intervalName","intervalDescription"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState} from \"react\"\nimport {useParams, useHistory, NavLink} from \"react-router-dom\";\nimport './Appearence/index.css'\nimport './Appearence/ResultPage.css'\nimport {useHttp} from \"../Hooks/http.hook\"\nimport {AuthContext} from \"./Context/AuthContext\"\nimport ScaleIncreasing from './Functions and const/ScaleIncreasing'\n\nexport const ResultPage = () => {\n\n    const login = useParams().id\n    const link = useParams().link\n\n    const {request} = useHttp()\n    const {token, username, userType} = useContext(AuthContext)\n    const history = useHistory()\n\n    if (userType !== 'p' && login !== username)\n        history.push(`/tests/${link}`)\n\n    const [result, setResult] = useState([])\n    const [test, setTest] = useState('')\n    const [error, setError] = useState('Пока что такого результата нет')\n    const [importantResults, setImportantResults] = useState(false)\n    const [notImportantResults, setNotImportantResults] = useState(false)\n\n    const fetchResult = async () => {\n        try {\n            let fetched = await request(`/api/tests/${link}/result/${login}`, 'GET', null, {\n                Authorization: `Bearer ${token}`\n            })\n            if (!fetched.message){\n                setError(null)\n                setTest(fetched.test)\n                fetched.scales.sort((a, b) => a.points < b.points ? 1 : -1)\n                setResult(fetched.scales)\n\n                if (fetched.scales[0].important)\n                    setImportantResults(true)\n                if (!fetched.scales[fetched.scales.length - 1].important)\n                    setNotImportantResults(true)\n            }\n        }\n        catch (e) {\n            // history.push(`/tests/${link}`)\n        }\n    }\n\n    useEffect(() => {\n        document.body.style = 'transition-duration: .7s; transition-timing-function: ease-in-out; background: white;'\n    })\n    useEffect(() => {\n        if (!test)\n            fetchResult()\n    }, [test])\n\n    return(\n        <div className = 'resultPage'>\n\n            {\n                error &&\n                <p className = 'notFound'>\n                    {error}\n                </p>\n            }\n\n            <h1>{test}</h1>\n\n            {/*{*/}\n            {/*    !error && importantResults && <h2>Завышенные показатели</h2>*/}\n            {/*}*/}\n            {\n                result.map((res, i) => {\n                    if (res.important)\n                    return (\n                        <div className = 'resultModule' title = {`Баллы: ${res.points} / ${res.maxPoints}`} key = {i}>\n                            <h3>{res.name}: {res.intervalName}</h3>\n                            <h2>{res.points} / {res.maxPoints}</h2>\n                            <div className = 'pointsScale'>\n                                {ScaleIncreasing(res.points, res.maxPoints, '#E88732', '#AB5500')}\n                            </div>\n                            <p>{res.intervalDescription}</p>\n                        </div>\n                    )\n                })\n            }\n\n            {/*{*/}\n            {/*    !error && notImportantResults && <h2>Норма</h2>*/}\n            {/*}*/}\n            {\n                result.map((res, i) => {\n                    if (!res.important)\n                        return (\n                            <div className = 'resultModule' key = {i}>\n                                <h3>{res.name}: {res.intervalName}</h3>\n                                <h2>{res.points} / {res.maxPoints}</h2>\n                                <div className = 'pointsScale' title = {`Баллы: ${res.points} / ${res.maxPoints}`}>\n                                    {ScaleIncreasing(res.points, res.maxPoints, '#E0E7B4', '#96A07C')}\n                                </div>\n                                <p className = 'resultDescription'>{res.intervalDescription}</p>\n                            </div>\n                        )\n                })\n            }\n\n            <div className = 'flexboxRow'>\n            {\n                login === username &&\n                <NavLink to = {`/tests/${link}`} className = 'longGreenBtn'>\n                    <p>Пройти заново</p>\n                </NavLink>\n            }\n            </div>\n        </div>\n    )\n}\n\nexport default ResultPage"]},"metadata":{},"sourceType":"module"}