{"ast":null,"code":"var _jsxFileName = \"/Users/alisakrylova/Intro/client/src/components/TestPage.js\";\nimport React, { useCallback, useContext, useEffect, useState } from 'react';\nimport './Appearence/index.css';\nimport './Appearence/TestPage.css';\nimport { AuthContext } from \"./Context/AuthContext\";\nimport { useHttp } from \"../Hooks/http.hook\";\nimport { useHistory, useParams } from 'react-router-dom';\nimport { NavLink } from \"react-router-dom\";\nimport { ReactComponent as Arrow } from \"@svgr/webpack?-svgo,+titleProp,+ref!./Appearence/Images/Arrow.svg\";\nexport const TestPage = () => {\n  const link = useParams().id;\n  const history = useHistory();\n  const [test, setTest] = useState({\n    name: '',\n    description: '',\n    shortDescription: '',\n    questions: [],\n    answers: []\n  });\n  const {\n    token,\n    userID,\n    username\n  } = useContext(AuthContext);\n  const [answers, setAnswers] = useState([]);\n  const {\n    loading,\n    request\n  } = useHttp();\n  const [content, setContent] = useState('description');\n  const [index, setIndex] = useState(0);\n  const [goNext, setGoNext] = useState(false);\n  const fetchTestData = useCallback(async () => {\n    try {\n      const fetched = await request(`/api/tests/${link}`, 'GET', null, {\n        Authorization: `Bearer ${token}`\n      });\n      setTest(fetched);\n    } catch (e) {}\n  }, [token, request]);\n\n  const saveAnswers = async e => {\n    e.preventDefault();\n    console.log(answers);\n\n    try {\n      const data = await request(`${link}/save`, 'POST', {\n        userID,\n        answers,\n        link,\n        date: new Date()\n      });\n      console.log(data.message);\n      if (data.message === 'Result is saved') history.push(`/tests/${link}/${username}`);\n    } catch (e) {}\n  };\n\n  const showTest = e => {\n    e.preventDefault();\n    setContent('testStartPage');\n  }; // const yesHandler = e => {\n  //     e.preventDefault()\n  //     document.getElementById('y' + index).style = 'transform: scale(1.2)'\n  //     document.getElementById('n' + index).style = 'transform: scale(1)'\n  //     setAnswers({...answers, [\"a\" + e.target.id]: true })\n  //     setGoNext(true)\n  // }\n  //\n  // const noHandler = e => {\n  //     e.preventDefault()\n  //     document.getElementById('y' + index).style = 'transform: scale(1)'\n  //     document.getElementById('n' + index).style = 'transform: scale(1.2)'\n  //     setAnswers({...answers, [\"a\" + e.target.id]: false })\n  //     setGoNext(true)\n  // }\n  //\n\n\n  const next = e => {\n    e.preventDefault(); //     if (goNext){\n    //         if (index < test.questions)setIndex(index + 1)\n    //         document.getElementById('y' + index).style = 'transform: scale(1)'\n    //         document.getElementById('n' + index).style = 'transform: scale(1)'\n    //         try { document.getElementById('next' + index).style = 'transform: scale(1.2)' } catch (e) {}\n    //         try { document.getElementById('next' + index).style = 'transform: scale(1)' } catch (e) {}\n    //         try { document.getElementById('back' + index).style = 'transform: scale(1)' } catch (e) {}\n    //         setGoNext(false)\n    //     }\n\n    setIndex(index + 1);\n  };\n\n  const back = e => {\n    e.preventDefault();\n    setIndex(index - 1); //     if (index > 0) setIndex(index - 1)\n    //     document.getElementById('y' + index).style = 'transform: scale(1)'\n    //     document.getElementById('n' + index).style = 'transform: scale(1)'\n    //     try { document.getElementById('next' + index).style = 'transform: scale(1)' } catch (e) {}\n    //     try { document.getElementById('back' + index).style = 'transform: scale(1.2)' } catch (e) {}\n    //     setGoNext(false)\n  };\n\n  const handleAnswering = (e, i, j) => {\n    let answ = answers;\n    if (!answ[j]) answ[j] = [];\n    if (!answ[j].includes(i)) answ[j].push(i);\n\n    for (let k = 0; k < answ.length; k++) {\n      if (!answ[k]) answ[k] = [];else {\n        if (answ[k].includes(i)) {\n          let index = answ[k].indexOf(i);\n          if (index != -1 && j != k) answ[k].splice(index, 1);\n        }\n\n        answ[k].sort((a, b) => a > b ? 1 : -1);\n      }\n    }\n\n    setAnswers(answ);\n  };\n\n  useEffect(() => {\n    fetchTestData();\n    if (content === 'testStartPage') document.body.style = 'transition-duration: 1s; transition-timing-function: ease-in-out; background: #E6EBC3;';\n  }, [fetchTestData, content]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, content === 'description' && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"testInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"bigTestName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 21\n    }\n  }, test.name), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"testDescription\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 21\n    }\n  }, test.shortDescription, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 21\n    }\n  }), test.description), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"button\",\n    className: \"redbtn\",\n    value: \"\",\n    disabled: loading,\n    onClick: showTest,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 21\n    }\n  })), content === 'testStartPage' && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }, test.questions.map((question, i) => {\n    if (i == index) return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"questionCard\",\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 28\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"arrows\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 32\n      }\n    }, i > 0 && /*#__PURE__*/React.createElement(Arrow, {\n      className: \"backArrow\",\n      onClick: e => back(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 40\n      }\n    }), i < test.q - 1 && /*#__PURE__*/React.createElement(Arrow, {\n      className: \"nextArrow\",\n      onClick: e => next(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 40\n      }\n    })), /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 32\n      }\n    }, i + 1, \"/\", test.q), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 32\n      }\n    }, question), i > 0 && /*#__PURE__*/React.createElement(\"input\", {\n      type: \"button\",\n      className: \"nobtn\",\n      value: \"\\u043D\\u0430\\u0437\\u0430\\u0434\",\n      id: 'back' + i,\n      disabled: loading,\n      onClick: e => back(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 36\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"answersBox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 32\n      }\n    }, test.answers.map((answer, j) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"registerbtn\",\n        key: j,\n        onClick: e => handleAnswering(e, i, j),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 40\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 44\n        }\n      }, answer));\n    })));\n  }), /*#__PURE__*/React.createElement(NavLink, {\n    to: \"/\" // to = {`/tests/${link}/${username}`}\n    ,\n    disabled: loading,\n    onClick: e => saveAnswers(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 25\n    }\n  }, \"\\u0420\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\"))));\n};\nexport default TestPage;","map":{"version":3,"sources":["/Users/alisakrylova/Intro/client/src/components/TestPage.js"],"names":["React","useCallback","useContext","useEffect","useState","AuthContext","useHttp","useHistory","useParams","NavLink","TestPage","link","id","history","test","setTest","name","description","shortDescription","questions","answers","token","userID","username","setAnswers","loading","request","content","setContent","index","setIndex","goNext","setGoNext","fetchTestData","fetched","Authorization","e","saveAnswers","preventDefault","console","log","data","date","Date","message","push","showTest","next","back","handleAnswering","i","j","answ","includes","k","length","indexOf","splice","sort","a","b","document","body","style","map","question","q","answer"],"mappings":"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","sourcesContent":["import React, {useCallback, useContext, useEffect, useState} from 'react'\nimport './Appearence/index.css'\nimport './Appearence/TestPage.css'\nimport {AuthContext} from \"./Context/AuthContext\";\nimport {useHttp} from \"../Hooks/http.hook\";\nimport {useHistory, useParams} from 'react-router-dom'\nimport {NavLink} from \"react-router-dom\";\nimport {ReactComponent as Arrow} from './Appearence/Images/Arrow.svg'\n\nexport const TestPage = () => {\n\n    const link = useParams().id\n    const history = useHistory()\n\n    const [test, setTest] = useState({ name: '', description: '', shortDescription: '', questions: [], answers: []})\n    const {token, userID, username} = useContext(AuthContext)\n    const [answers, setAnswers] = useState([])\n    const {loading, request} = useHttp()\n\n\n    const [content, setContent] = useState('description')\n    const [index, setIndex] = useState(0)\n    const [goNext, setGoNext] = useState(false)\n\n    const fetchTestData = useCallback(async () => {\n        try {\n            const fetched = await request(`/api/tests/${link}`, 'GET', null, {\n                Authorization: `Bearer ${token}`\n            })\n            setTest(fetched)\n        }\n        catch (e) {}\n    }, [token, request])\n\n    const saveAnswers = async (e) => {\n        e.preventDefault()\n        console.log(answers)\n        try {\n            const data = await request(`${link}/save`, 'POST', {userID, answers, link, date: new Date()})\n            console.log(data.message)\n            if (data.message === 'Result is saved')\n                history.push(`/tests/${link}/${username}`)\n        }\n        catch (e) {}\n    }\n\n    const showTest = e => {\n        e.preventDefault()\n        setContent('testStartPage')\n    }\n\n    // const yesHandler = e => {\n    //     e.preventDefault()\n    //     document.getElementById('y' + index).style = 'transform: scale(1.2)'\n    //     document.getElementById('n' + index).style = 'transform: scale(1)'\n    //     setAnswers({...answers, [\"a\" + e.target.id]: true })\n    //     setGoNext(true)\n    // }\n    //\n    // const noHandler = e => {\n    //     e.preventDefault()\n    //     document.getElementById('y' + index).style = 'transform: scale(1)'\n    //     document.getElementById('n' + index).style = 'transform: scale(1.2)'\n    //     setAnswers({...answers, [\"a\" + e.target.id]: false })\n    //     setGoNext(true)\n    // }\n    //\n    const next = e => {\n        e.preventDefault()\n    //     if (goNext){\n    //         if (index < test.questions)setIndex(index + 1)\n    //         document.getElementById('y' + index).style = 'transform: scale(1)'\n    //         document.getElementById('n' + index).style = 'transform: scale(1)'\n    //         try { document.getElementById('next' + index).style = 'transform: scale(1.2)' } catch (e) {}\n    //         try { document.getElementById('next' + index).style = 'transform: scale(1)' } catch (e) {}\n    //         try { document.getElementById('back' + index).style = 'transform: scale(1)' } catch (e) {}\n    //         setGoNext(false)\n    //     }\n        setIndex(index + 1)\n    }\n\n    const back = e => {\n        e.preventDefault()\n        setIndex(index - 1)\n    //     if (index > 0) setIndex(index - 1)\n    //     document.getElementById('y' + index).style = 'transform: scale(1)'\n    //     document.getElementById('n' + index).style = 'transform: scale(1)'\n    //     try { document.getElementById('next' + index).style = 'transform: scale(1)' } catch (e) {}\n    //     try { document.getElementById('back' + index).style = 'transform: scale(1.2)' } catch (e) {}\n    //     setGoNext(false)\n    }\n\n    const handleAnswering = (e, i, j) => {\n        let answ = answers\n\n        if (!answ[j])\n            answ[j] = []\n\n        if (!answ[j].includes(i))\n            answ[j].push(i)\n\n        for (let k = 0; k < answ.length; k++){\n            if (!answ[k])\n                answ[k] = []\n            else {\n                if (answ[k].includes(i)){\n                    let index = answ[k].indexOf(i)\n                    if (index != -1 && j != k)\n                        answ[k].splice(index, 1)\n                }\n                answ[k].sort((a, b) => a > b ? 1 : -1)\n            }\n        }\n\n        setAnswers(answ)\n    }\n\n    useEffect(() => {\n        fetchTestData()\n        if (content === 'testStartPage')\n            document.body.style = 'transition-duration: 1s; transition-timing-function: ease-in-out; background: #E6EBC3;'\n    }, [fetchTestData, content])\n\n\n    return (\n        <div>\n            { content === 'description' &&\n                <div className = 'testInfo'>\n                    <h1 className = 'bigTestName'>{test.name}</h1>\n                    <p className='testDescription'>{test.shortDescription}\n                    <br/>{test.description}</p>\n                    <input type='button' className = 'redbtn'  value = '' disabled={loading} onClick = {showTest} />\n                </div>\n            }\n\n            { content === 'testStartPage' &&\n                <div>\n                {\n                   test.questions.map((question, i) => {\n                       if (i == index)\n                       return (\n                           <div className = 'questionCard' key = {i}>\n\n                               <div className = 'arrows'>\n                                   {\n                                       (i > 0) &&\n                                       <Arrow className = 'backArrow' onClick={e => back(e)}/>\n                                   }\n                                   {\n                                       (i < test.q - 1) &&\n                                       <Arrow className = 'nextArrow' onClick={e => next(e)}/>\n                                   }\n                               </div>\n\n                               <h1>{i + 1}/{test.q}</h1>\n                               <p>{question}</p>\n\n                               {\n                                   i > 0 &&\n                                   <input type='button' className = 'nobtn'  value = 'назад' id = {'back'+i} disabled={loading} onClick={e => back(e)}/>\n                               }\n\n                               <div className = 'answersBox'>\n                               {\n                                   test.answers.map((answer, j) => {\n                                       return(\n                                       <div className = 'registerbtn' key = {j} onClick = {(e) => handleAnswering(e, i, j)}>\n                                           <p>{answer}</p>\n                                       </div>)\n                                   })\n                               }\n                                   </div>\n\n                               {\n                                   // && (answers.filter(a => a.includes(i)).length == 1) &&\n                                   // answers.filter(a => a.includes(i)).length > 0 &&\n                               }\n                           </div>\n                       )\n                        })\n                }\n                    {/*{*/}\n                    {/*    // index == test.questions - 1 &&*/}\n                        {/*<input type='button' className = 'yesbtn'  value = 'результат' disabled={loading} onClick={e => saveAnswers(e)}/>*/}\n                    {/*}*/}\n                    {/*<input type='button' className = 'yesbtn'  value = 'результат' disabled={loading} onClick={e => saveAnswers(e)}/>*/}\n                    <NavLink to = '/'\n                         // to = {`/tests/${link}/${username}`}\n                             disabled={loading}\n                             onClick={e => saveAnswers(e)}\n                    >\n                        <p>Результат</p>\n                    </NavLink>\n                </div>\n            }\n        </div>\n\n\n    )\n}\n\nexport default TestPage;"]},"metadata":{},"sourceType":"module"}