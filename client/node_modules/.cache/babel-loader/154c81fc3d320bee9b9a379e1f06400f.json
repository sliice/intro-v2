{"ast":null,"code":"var _jsxFileName = \"/Users/alisakrylova/Intro/client/src/components/Profile.js\";\nimport React, { useCallback, useContext, useEffect, useState } from 'react';\nimport { useParams } from \"react-router-dom\";\nimport './Appearence/Profile.css';\nimport './Appearence/index.css';\nimport { AuthContext } from \"./Context/AuthContext\";\nimport { useHttp } from \"../Hooks/http.hook\";\nimport { NavLink } from \"react-router-dom\";\nexport const Profile = () => {\n  const username = useParams().id;\n  const {\n    loading,\n    request\n  } = useHttp(); // const {token, userID, name, surname, username, userType} = useContext(AuthContext)\n\n  const {\n    token,\n    userID\n  } = useContext(AuthContext);\n  const [results, setResults] = useState([]);\n  const [shown, setShown] = useState([]);\n  const [isSearching, activateSearching] = useState('none');\n  const [search, setSearch] = useState('');\n  const [notFound, setNotFound] = useState();\n  const [sorted, setSorted] = useState(false);\n  const [resultsFetched, setResultsFetched] = useState(false);\n  const [userDataFetched, setUserDataFetched] = useState(false);\n  const [userData, setUserData] = useState({\n    name: '',\n    surname: '',\n    type: '',\n    pic: '',\n    birthdate: ''\n  });\n  const fetchUserData = useCallback(async () => {\n    try {\n      const fetched = await request(`/users/${username}`, 'GET', null, {\n        Authorization: `Bearer ${token}`\n      });\n      setUserData(fetched);\n      setUserDataFetched(true);\n    } catch (e) {}\n  }, [token, username]);\n  const fetchResults = useCallback(async () => {\n    try {\n      const fetched = await request(`/results/${username}`, 'GET', null, {\n        Authorization: `Bearer ${token}`\n      });\n      fetched.sort((a, b) => a.result[0].date > b.result[0].date ? 1 : -1);\n      setResults(fetched);\n      setResultsFetched(true);\n    } catch (e) {}\n  }, [token, userID]);\n\n  const handleSearchActivating = e => {\n    e.preventDefault();\n\n    switch (isSearching) {\n      case 'active':\n        activateSearching('inactive');\n        break;\n\n      case 'none':\n      case 'inactive':\n        activateSearching('active');\n        document.getElementById('search').focus();\n        break;\n    }\n  };\n\n  const doSearch = e => {\n    e.preventDefault();\n\n    try {\n      let searchFilter = e.target.value.toString().toLowerCase();\n      setSearch(searchFilter);\n      setNotFound(false);\n\n      if (searchFilter != '') {\n        let resultsArray = [];\n        results.map(result => {\n          let res = '';\n          result.result.map(r => {\n            res += r.scaleResult.toString();\n          });\n          resultsArray.push((result.test + res).toString().toLowerCase());\n        });\n        let indexes = [];\n        resultsArray.map((result, i) => {\n          if (resultsArray[i].toString().includes(searchFilter)) indexes.push(i);\n        });\n\n        if (indexes.length != 0) {\n          setShown([...indexes]);\n          setNotFound(false);\n        } else setNotFound(true);\n      } else showAll();\n    } catch (e) {}\n  };\n\n  const doSort = e => {\n    e.preventDefault();\n\n    try {\n      switch (sorted) {\n        case true:\n          document.getElementById('sortIcon').style = 'transform: rotate(360deg);';\n          document.getElementById('resultsCollection').style = 'flex-direction: column;';\n          setSorted(false);\n          break;\n\n        case false:\n          document.getElementById('sortIcon').style = 'transform: rotate(180deg);';\n          document.getElementById('resultsCollection').style = 'flex-direction: column-reverse;';\n          setSorted(true);\n          break;\n      }\n    } catch (e) {}\n  };\n\n  const showAll = () => {\n    let shownSize = [];\n\n    for (let i = 0; i < results.length; i++) {\n      shownSize.push(i);\n    }\n\n    setShown([...shownSize]);\n  };\n\n  useEffect(() => {\n    document.body.style = 'transition-duration: .7s; transition-timing-function: ease-in-out; background: white;';\n    !resultsFetched && fetchResults();\n    !userDataFetched && fetchUserData();\n    if (shown.length == 0) showAll();\n  });\n\n  const emojiToString = arr => {\n    let str = '';\n\n    for (let i = 0; i < arr.length; i++) {\n      return String.fromCodePoint(arr[i]);\n    }\n\n    return str;\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profileContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profilePic\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 11\n    }\n  }, \" \", emojiToString(userData.pic), \" \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profileHeader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: userData.name + ' ' + userData.surname,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: '@' + userData.login,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }\n  }), userData.type === 'p' && /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }\n  }, \"\\u041F\\u0435\\u0434\\u0430\\u0433\\u043E\\u0433-\\u043F\\u0441\\u0438\\u0445\\u043E\\u043B\\u043E\\u0433\"), userData.type === 'u' && /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }\n  }, \"\\u0423\\u0447\\u0435\\u043D\\u0438\\u043A\"))), results.length != 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"searchAndSort\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"search\",\n    className: isSearching === 'active' && 'searchAppearing' || isSearching === 'inactive' && 'searchDisappearing' || isSearching === 'none' && 'invisible',\n    placeholder: \"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043F\\u043E \\u0440\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\\u0430\\u043C\",\n    onChange: doSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"searchIcon\",\n    name: \"searchIcon\",\n    width: \"250px\",\n    height: \"277px\",\n    viewBox: \"0 0 250 277\",\n    version: \"1.1\",\n    onClick: handleSearchActivating,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Logo\",\n    stroke: \"none\",\n    \"stroke-width\": \"1\",\n    fill: \"none\",\n    \"fill-rule\": \"evenodd\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    className: isSearching === 'active' && 'activeStroke activeFill' || isSearching === 'inactive' && 'inactiveStroke inactiveFill' || isSearching === 'none' && 'inactiveStroke inactiveFill',\n    d: \"M256.23536,245.633373 C256.240323,245.854751 256.242819,246.076789 256.242819,246.299457 C256.242819,261.211145 245.049938,273.299457 231.242819,273.299457 C217.4357,273.299457 206.242819,261.211145 206.242819,246.299457 C206.242819,246.076789 206.245315,245.854751 206.250278,245.633373 Z\",\n    id: \"Combined-Shape\",\n    transform: \"translate(231.242819, 259.466415) rotate(-40.000000) translate(-231.242819, -259.466415) \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle\",\n    className: isSearching === 'active' && 'activeStroke activeFill' || isSearching === 'inactive' && 'inactiveStroke inactiveFill' || isSearching === 'none' && 'inactiveStroke inactiveFill',\n    transform: \"translate(199.856726, 222.096267) rotate(-40.000000) translate(-199.856726, -222.096267) \",\n    x: \"174.856726\",\n    y: \"186.596267\",\n    width: \"50\",\n    height: \"71\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    id: \"Oval\",\n    className: isSearching === 'active' && 'activeStroke' || isSearching === 'inactive' && 'inactiveStroke' || isSearching === 'none' && 'inactiveStroke',\n    \"stroke-width\": \"50\",\n    cx: \"125\",\n    cy: \"125\",\n    r: \"100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"sortIcon\",\n    id: \"sortIcon\",\n    onClick: doSort,\n    width: \"378px\",\n    height: \"282px\",\n    viewBox: \"0 0 378 282\",\n    version: \"1.1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Logo\",\n    stroke: \"none\",\n    \"stroke-width\": \"1\",\n    fill: \"none\",\n    \"fill-rule\": \"evenodd\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M96.0389392,1 C106.609669,1 115.859436,5.58308193 120.9273,12.4308996 L121.015825,12.5525321 L184.479,88.185 L184.496508,88.1714212 C184.642609,88.3378163 184.787245,88.5063032 184.930373,88.6768766 C194.515421,100.099893 193.711394,116.554722 183.134527,125.429767 C172.70048,134.184972 156.653546,132.29306 147.020097,121.273869 L146.992363,121.296357 L121.038,90.365 L121.038939,199 L121.03148,199 C121.036443,199.221378 121.038939,199.443416 121.038939,199.666084 C121.038939,214.577772 109.846058,226.666084 96.0389392,226.666084 C82.2318205,226.666084 71.0389392,214.577772 71.0389392,199.666084 C71.0389392,199.443416 71.041435,199.221378 71.0463979,199 L71.0389392,199 L71.038,90.942 L46.409,120.293 L46.4188636,120.301213 C46.2803665,120.473988 46.1395549,120.645684 45.9964268,120.816257 C36.4113784,132.239273 20.0669169,134.304812 9.49005029,125.429767 C-0.91459931,116.699229 -1.8620698,100.633732 7.23426161,89.2388073 L7.21214233,89.2211541 L69.5356122,14.9464184 C74.0533978,6.728782 84.2205763,1 96.0389392,1 Z\",\n    id: \"Combined-Shape\",\n    stroke: \"#4A4A4A\",\n    fill: \"#4A4A4A\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M282.185638,55 C294.279566,55 304.644412,60.9990492 308.99572,69.5252612 L370.259061,142.536 L370.296508,142.505337 C370.442609,142.671732 370.587245,142.840219 370.730373,143.010793 C380.315421,154.433809 379.511394,170.888638 368.934527,179.763683 C358.495096,188.523405 342.436985,186.625021 332.805192,175.590722 L332.757304,175.630273 L306.803061,144.699 L306.80388,253.333916 L306.796421,253.333916 C306.801384,253.555294 306.80388,253.777332 306.80388,254 C306.80388,268.911688 295.610999,281 281.80388,281 C267.996761,281 256.80388,268.911688 256.80388,254 C256.80388,253.777332 256.806376,253.555294 256.811339,253.333916 L256.80388,253.333916 L256.803061,145.276 L232.172061,174.629 L232.179924,174.635129 C232.041427,174.807904 231.900616,174.9796 231.757488,175.150173 C222.172439,186.573189 205.827978,188.638728 195.251111,179.763683 C184.845967,171.03273 183.898901,154.96612 192.99662,143.571098 L192.977083,143.55507 L255.890594,68.5762614 C260.507198,60.5572584 270.545545,55 282.185638,55 Z\",\n    id: \"Combined-Shape-Copy-10\",\n    stroke: \"#D6D6D6\",\n    fill: \"#D6D6D6\",\n    transform: \"translate(282.092819, 168.000000) rotate(180.000000) translate(-282.092819, -168.000000) \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"resultsCollection\",\n    className: \"results\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 9\n    }\n  }, notFound && /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"notFound\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 25\n    }\n  }, \"\\u041D\\u0438\\u0447\\u0435\\u0433\\u043E \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E\") || !notFound && results.map((result, index) => {\n    if (shown.includes(index)) {\n      return /*#__PURE__*/React.createElement(NavLink, {\n        to: '/',\n        key: index,\n        className: \"resultItem soft_appearing\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"resultTestName\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 23\n        }\n      }, result.test), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"shortResult\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 23\n        }\n      }, result.result.map((result, i) => {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          key: i,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 37\n          }\n        }, result.scaleResult);\n      })));\n    }\n  })));\n};\nexport default Profile;","map":{"version":3,"sources":["/Users/alisakrylova/Intro/client/src/components/Profile.js"],"names":["React","useCallback","useContext","useEffect","useState","useParams","AuthContext","useHttp","NavLink","Profile","username","id","loading","request","token","userID","results","setResults","shown","setShown","isSearching","activateSearching","search","setSearch","notFound","setNotFound","sorted","setSorted","resultsFetched","setResultsFetched","userDataFetched","setUserDataFetched","userData","setUserData","name","surname","type","pic","birthdate","fetchUserData","fetched","Authorization","e","fetchResults","sort","a","b","result","date","handleSearchActivating","preventDefault","document","getElementById","focus","doSearch","searchFilter","target","value","toString","toLowerCase","resultsArray","map","res","r","scaleResult","push","test","indexes","i","includes","length","showAll","doSort","style","shownSize","body","emojiToString","arr","str","String","fromCodePoint","login","index"],"mappings":"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","sourcesContent":["import React, {useCallback, useContext, useEffect, useState} from 'react'\nimport {useParams} from \"react-router-dom\";\nimport './Appearence/Profile.css'\nimport './Appearence/index.css'\nimport {AuthContext} from \"./Context/AuthContext\"\nimport {useHttp} from \"../Hooks/http.hook\";\nimport {NavLink} from \"react-router-dom\";\n\nexport const Profile = () => {\n\n\n  const username = useParams().id\n  const {loading, request} = useHttp();\n\n  // const {token, userID, name, surname, username, userType} = useContext(AuthContext)\n  const {token, userID} = useContext(AuthContext)\n  const [results, setResults] = useState([])\n  const [shown, setShown] = useState([])\n  const [isSearching, activateSearching] = useState('none')\n  const [search, setSearch] = useState('')\n  const [notFound, setNotFound] = useState()\n  const [sorted, setSorted] = useState(false)\n  const [resultsFetched, setResultsFetched] = useState(false)\n  const [userDataFetched, setUserDataFetched] = useState(false)\n\n  const [userData, setUserData] = useState({\n    name: '',\n    surname: '',\n    type: '',\n    pic: '',\n    birthdate: ''\n  })\n\n\n  const fetchUserData = useCallback(async () => {\n    try {\n      const fetched = await request(`/users/${username}`, 'GET', null, {\n        Authorization: `Bearer ${token}`\n      })\n      setUserData(fetched)\n      setUserDataFetched(true)\n    }\n    catch (e) {}\n  }, [token, username])\n\n  const fetchResults = useCallback(async () => {\n    try {\n      const fetched = await request(`/results/${username}`, 'GET', null, {\n        Authorization: `Bearer ${token}`\n      })\n\n      fetched.sort((a, b) => a.result[0].date > b.result[0].date ? 1 : -1);\n      setResults(fetched)\n      setResultsFetched(true)\n    }\n    catch (e) {}\n  }, [token, userID])\n\n\n  const handleSearchActivating = e => {\n    e.preventDefault()\n    switch (isSearching){\n      case 'active':\n        activateSearching('inactive');\n        break\n      case 'none':\n      case 'inactive':\n        activateSearching('active');\n        document.getElementById('search').focus()\n        break\n    }\n  }\n\n  const doSearch = e => {\n    e.preventDefault()\n    try {\n      let searchFilter = e.target.value.toString().toLowerCase()\n      setSearch(searchFilter)\n      setNotFound(false)\n      if (searchFilter != '') {\n        let resultsArray = []\n        results.map(result => {\n          let res = ''\n          result.result.map(r => {\n            res += r.scaleResult.toString()\n          })\n          resultsArray.push((result.test + res).toString().toLowerCase())\n        })\n\n        let indexes = []\n        resultsArray.map((result, i) => {\n          if (resultsArray[i].toString().includes(searchFilter))\n            indexes.push(i)\n        })\n\n        if (indexes.length != 0) {\n          setShown([...indexes])\n          setNotFound(false)\n        }\n        else setNotFound(true)\n      }\n      else showAll()\n    }\n    catch (e) {}\n  }\n\n  const doSort = e => {\n    e.preventDefault()\n    try {\n      switch (sorted) {\n        case true:\n          document.getElementById('sortIcon').style = 'transform: rotate(360deg);';\n          document.getElementById('resultsCollection').style = 'flex-direction: column;';\n          setSorted(false);\n          break;\n        case false:\n          document.getElementById('sortIcon').style = 'transform: rotate(180deg);';\n          document.getElementById('resultsCollection').style = 'flex-direction: column-reverse;';\n          setSorted(true);\n          break;\n      }\n    }\n    catch (e) {}\n  }\n\n  const showAll = () => {\n    let shownSize = []\n    for (let i = 0; i < results.length; i++){\n      shownSize.push(i)\n    }\n    setShown([...shownSize])\n  }\n\n  useEffect(() => {\n    document.body.style = 'transition-duration: .7s; transition-timing-function: ease-in-out; background: white;'\n    !resultsFetched && fetchResults()\n    !userDataFetched && fetchUserData()\n    if (shown.length == 0) showAll()\n  })\n\n  const emojiToString = arr => {\n    let str = ''\n    for (let i = 0; i < arr.length; i++) {\n      return  String.fromCodePoint(arr[i])\n    }\n    return str\n  }\n\n\n  return (\n      <div>\n        <div className = 'profileContainer'>\n          <div className = 'profilePic'> {emojiToString(userData.pic)} </div>\n\n          <div className = 'profileHeader'>\n            {/*<h1>{userData.name} {userData.surname} </h1>*/}\n            {/*<h2>@ {userData.login}</h2>*/}\n            <input type = 'text' value = {userData.name + ' ' + userData.surname} />\n            <input type = 'text' value = {'@' + userData.login} />\n\n            {userData.type === 'p' &&\n            <h2>Педагог-психолог</h2>}\n            {userData.type === 'u' &&\n            <h2>Ученик</h2>}\n\n          </div>\n        </div>\n\n        {results.length != 0 &&\n        <div className = 'searchAndSort'>\n          <input type = 'text' id = 'search'\n                 className = {  isSearching === 'active' && 'searchAppearing' ||\n                 isSearching === 'inactive' && 'searchDisappearing' ||\n                 isSearching === 'none' && 'invisible'}\n                 placeholder = 'Поиск по результатам' onChange = {doSearch}/>\n\n          <svg className = 'searchIcon' name = 'searchIcon' width=\"250px\" height=\"277px\" viewBox=\"0 0 250 277\" version=\"1.1\"\n               onClick = {handleSearchActivating}>\n            <g id=\"Logo\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n              <path className = {   isSearching === 'active' && 'activeStroke activeFill' ||\n              isSearching === 'inactive' && 'inactiveStroke inactiveFill' ||\n              isSearching === 'none' && 'inactiveStroke inactiveFill'}\n                    d=\"M256.23536,245.633373 C256.240323,245.854751 256.242819,246.076789 256.242819,246.299457 C256.242819,261.211145 245.049938,273.299457 231.242819,273.299457 C217.4357,273.299457 206.242819,261.211145 206.242819,246.299457 C206.242819,246.076789 206.245315,245.854751 206.250278,245.633373 Z\" id=\"Combined-Shape\" transform=\"translate(231.242819, 259.466415) rotate(-40.000000) translate(-231.242819, -259.466415) \"></path>\n              <rect id=\"Rectangle\"\n                    className = {   isSearching === 'active' && 'activeStroke activeFill' ||\n                    isSearching === 'inactive' && 'inactiveStroke inactiveFill' ||\n                    isSearching === 'none' && 'inactiveStroke inactiveFill'}\n                    transform=\"translate(199.856726, 222.096267) rotate(-40.000000) translate(-199.856726, -222.096267) \" x=\"174.856726\" y=\"186.596267\" width=\"50\" height=\"71\"></rect>\n              <circle id=\"Oval\"\n                      className = {   isSearching === 'active' && 'activeStroke' ||\n                      isSearching === 'inactive' && 'inactiveStroke' ||\n                      isSearching === 'none' && 'inactiveStroke'}\n                      stroke-width=\"50\" cx=\"125\" cy=\"125\" r=\"100\"></circle>\n            </g>\n          </svg>\n\n          <svg className = 'sortIcon' id = 'sortIcon' onClick = {doSort} width=\"378px\" height=\"282px\" viewBox=\"0 0 378 282\" version=\"1.1\">\n            <g id=\"Logo\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n              <path d=\"M96.0389392,1 C106.609669,1 115.859436,5.58308193 120.9273,12.4308996 L121.015825,12.5525321 L184.479,88.185 L184.496508,88.1714212 C184.642609,88.3378163 184.787245,88.5063032 184.930373,88.6768766 C194.515421,100.099893 193.711394,116.554722 183.134527,125.429767 C172.70048,134.184972 156.653546,132.29306 147.020097,121.273869 L146.992363,121.296357 L121.038,90.365 L121.038939,199 L121.03148,199 C121.036443,199.221378 121.038939,199.443416 121.038939,199.666084 C121.038939,214.577772 109.846058,226.666084 96.0389392,226.666084 C82.2318205,226.666084 71.0389392,214.577772 71.0389392,199.666084 C71.0389392,199.443416 71.041435,199.221378 71.0463979,199 L71.0389392,199 L71.038,90.942 L46.409,120.293 L46.4188636,120.301213 C46.2803665,120.473988 46.1395549,120.645684 45.9964268,120.816257 C36.4113784,132.239273 20.0669169,134.304812 9.49005029,125.429767 C-0.91459931,116.699229 -1.8620698,100.633732 7.23426161,89.2388073 L7.21214233,89.2211541 L69.5356122,14.9464184 C74.0533978,6.728782 84.2205763,1 96.0389392,1 Z\" id=\"Combined-Shape\"\n                    stroke=\"#4A4A4A\" fill=\"#4A4A4A\"></path>\n              <path d=\"M282.185638,55 C294.279566,55 304.644412,60.9990492 308.99572,69.5252612 L370.259061,142.536 L370.296508,142.505337 C370.442609,142.671732 370.587245,142.840219 370.730373,143.010793 C380.315421,154.433809 379.511394,170.888638 368.934527,179.763683 C358.495096,188.523405 342.436985,186.625021 332.805192,175.590722 L332.757304,175.630273 L306.803061,144.699 L306.80388,253.333916 L306.796421,253.333916 C306.801384,253.555294 306.80388,253.777332 306.80388,254 C306.80388,268.911688 295.610999,281 281.80388,281 C267.996761,281 256.80388,268.911688 256.80388,254 C256.80388,253.777332 256.806376,253.555294 256.811339,253.333916 L256.80388,253.333916 L256.803061,145.276 L232.172061,174.629 L232.179924,174.635129 C232.041427,174.807904 231.900616,174.9796 231.757488,175.150173 C222.172439,186.573189 205.827978,188.638728 195.251111,179.763683 C184.845967,171.03273 183.898901,154.96612 192.99662,143.571098 L192.977083,143.55507 L255.890594,68.5762614 C260.507198,60.5572584 270.545545,55 282.185638,55 Z\" id=\"Combined-Shape-Copy-10\"\n                    stroke=\"#D6D6D6\" fill=\"#D6D6D6\" transform=\"translate(282.092819, 168.000000) rotate(180.000000) translate(-282.092819, -168.000000) \"></path>\n            </g>\n          </svg>\n\n\n\n        </div>\n        }\n\n        <div id = 'resultsCollection' className = 'results'>\n          {\n            notFound && <h1 className = 'notFound'>Ничего не найдено</h1> ||\n            !notFound &&\n            results.map((result, index) => {\n              if (shown.includes(index)){\n                return (\n                    <NavLink to={'/'} key={index} className='resultItem soft_appearing'>\n                      <p className='resultTestName'>{result.test}</p>\n                      <div className='shortResult'>\n                        {\n                          result.result.map((result, i) => {\n                                return (\n                                    <p key={i}>{result.scaleResult}</p>\n                                )\n                              }\n                          )}\n                      </div>\n                    </NavLink>\n                )}\n            })\n          }\n        </div>\n\n      </div>\n  )\n\n\n}\n\nexport default Profile;"]},"metadata":{},"sourceType":"module"}